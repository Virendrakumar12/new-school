(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1580],{28:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(7876),l=s(4232),r=s(1777),n=s(409),d=s(9312),i=s(4293),c=s(2341),o=s(3022),u=s(5104),h=s(2089);let x=e=>{let{students:t,onAdd:s,onView:l,onEdit:r,onDelete:n}=e;return(0,a.jsx)("div",{className:"overflow-x-auto shadow rounded-lg bg-white",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[(0,a.jsx)("thead",{className:"bg-gray-100 text-gray-700 text-left",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3",children:"REG.NO"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Name"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Email"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"fatherName"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"parentCode"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Class"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"currentSection"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Status"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:null==t?void 0:t.map(e=>{var t,d,i,x;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition",children:[(0,a.jsx)("td",{className:"px-4 py-3",children:e.registrationNumber}),(0,a.jsxs)("td",{className:"px-4 py-3 font-medium text-gray-800",children:[e.firstName," ",e.lastName]}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.email}),(0,a.jsx)("td",{className:"px-4 py-3",children:(null==(t=e.parent)?void 0:t.fatherName)||"N/A"}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.parentCode}),(0,a.jsx)("td",{className:"px-4 py-3",children:(null==(i=e.currentSection)||null==(d=i.classId)?void 0:d.className)||"N/A"}),(0,a.jsx)("td",{className:"px-4 py-3",children:(null==(x=e.currentSection)?void 0:x.sectionName)||"N/A"}),(0,a.jsx)("td",{className:"px-4 py-3 capitalize",children:e.status}),(0,a.jsxs)("td",{className:"px-4 py-3 flex justify-center gap-2 text-gray-600",children:[(0,a.jsx)("button",{onClick:()=>l(e),className:"hover:text-blue-600",title:"View",children:(0,a.jsx)(c.A,{size:18})}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>r(e),className:"hover:text-yellow-500",title:"Edit",children:(0,a.jsx)(o.A,{size:18})}),!e.hasFeeGenerated&&(0,a.jsx)("button",{onClick:()=>s(e),className:"hover:text-green-600",title:"Add Fee",children:(0,a.jsx)(u.A,{size:18})}),(0,a.jsx)("button",{onClick:()=>n(e._id),className:"hover:text-red-500",title:"Delete",children:(0,a.jsx)(h.A,{size:18})})]})]})]},e._id)})})]})})};var m=s(8666),p=s(9099),y=s(7821),N=s(672);let j=()=>{let e=(0,r.wA)(),t=(0,p.useRouter)(),{enqueueSnackbar:s}=(0,y.dh)(),{students:c}=(0,r.d4)(e=>e.student),{classes:o}=(0,r.d4)(e=>e.class),{sections:u}=(0,r.d4)(e=>e.section),[h,j]=(0,l.useState)(""),[v,f]=(0,l.useState)(""),[b,g]=(0,l.useState)(!1),[w,k]=(0,l.useState)(""),[A,_]=(0,l.useState)(null),[C,S]=(0,l.useState)(""),E=c.filter(e=>{var t,s,a;let l="".concat(e.firstName," ").concat(e.lastName).toLowerCase(),r=!C||l.includes(C.toLowerCase()),n=!h||(null==(s=e.currentSection)||null==(t=s.classId)?void 0:t._id)===h,d=!v||(null==(a=e.currentSection)?void 0:a._id)===v;return r&&n&&d}),z=C||h||v,M=h?u.filter(e=>e.classId._id===h):[];(0,l.useEffect)(()=>{e((0,n.Y)()),e((0,d.jt)())},[e]),(0,l.useEffect)(()=>{h&&e((0,i.jO)(h))},[e,h]);let F=()=>{g(!1),_(null)};return(0,a.jsxs)("div",{className:"p-4 max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"All Students"}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsxs)("select",{value:h,onChange:e=>{j(e.target.value),f("")},className:"border p-2 rounded-md",children:[(0,a.jsx)("option",{value:"",children:"Select Class"}),o.map(e=>(0,a.jsx)("option",{value:e._id,children:e.className},e._id))]}),(0,a.jsxs)("select",{value:v,onChange:e=>f(e.target.value),className:"border p-2 rounded-md",children:[(0,a.jsx)("option",{value:"",children:"Select Section"}),M.map(e=>(0,a.jsx)("option",{value:e._id,children:e.sectionName},e._id))]}),(0,a.jsx)("input",{type:"text",placeholder:"Search by name...",value:C,onChange:e=>S(e.target.value),className:"border p-2 w-64 rounded-md"})]})]}),(0,a.jsx)(x,{students:z?E:c,onAdd:s=>{e((0,m._d)(s)),t.push("/Dashboard/Student/StudentFeeForm")},onView:s=>{e((0,m._d)(s)),t.push("/Dashboard/Student/StudentInfo/FetchFee")},onEdit:s=>{e((0,m._d)(s)),t.push("/Dashboard/Student/UpdateFee")},onDelete:e=>{_(c.find(t=>t._id===e)),g(!0)}}),b&&(0,a.jsx)("div",{className:"absolute inset-0 z-[999] flex items-center justify-center ml-24 mt-12 mr-12 bg-white-200 bg-opacity-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 mt-0 rounded shadow-md w-96 relative",children:[(0,a.jsxs)("button",{className:"absolute top-2 right-2 text-gray-600 hover:text-black",onClick:F,children:[(0,a.jsx)(N.A,{size:24})," "]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:["Are you sure you want to delete ",null==A?void 0:A.firstName,"?"]}),(0,a.jsx)("button",{className:"bg-red-600 text-white cursor-pointer px-4 py-2 rounded mt-4",onClick:()=>{let t=A._id;e((0,n.UT)(t)).unwrap().then(()=>{F(),s("Monthly fee deleted successfully!",{variant:"success"})}).catch(()=>{F(),s("failed to delete monthlyfee!",{variant:"error"})})},children:"Confirm Delete"})]}),(0,a.jsx)("button",{className:"mt-4 ml-2 cursor-pointer text-gray-600",onClick:F,children:"Cancel"})]})})]})}},252:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/Dashboard/Student/StudentFee",function(){return s(28)}])},672:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1713).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},1713:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var a=s(4232);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),n=e=>{let t=r(e);return t.charAt(0).toUpperCase()+t.slice(1)},d=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},i=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:l=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:o="",children:u,iconNode:h,...x}=e;return(0,a.createElement)("svg",{ref:t,...c,width:l,height:l,stroke:s,strokeWidth:n?24*Number(r)/Number(l):r,className:d("lucide",o),...!u&&!i(x)&&{"aria-hidden":"true"},...x},[...h.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let s=(0,a.forwardRef)((s,r)=>{let{className:i,...c}=s;return(0,a.createElement)(o,{ref:r,iconNode:t,className:d("lucide-".concat(l(n(e))),"lucide-".concat(e),i),...c})});return s.displayName=n(e),s}},2089:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1713).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2341:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1713).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3022:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1713).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},5104:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1713).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[636,6593,8792],()=>t(252)),_N_E=e.O()}]);