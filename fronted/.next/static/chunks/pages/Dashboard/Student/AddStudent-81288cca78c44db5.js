(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8545],{3464:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/Dashboard/Student/AddStudent",function(){return s(9320)}])},9320:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>m});var l=s(7876),t=s(4232),r=s(1777),d=s(1810),n=s(409),i=s(9099),c=s(9312),o=s(4293);let m=()=>{let e=(0,r.wA)(),a=(0,i.useRouter)(),[s,m]=(0,t.useState)(""),[u,b]=(0,t.useState)(null),{classes:h}=(0,r.d4)(e=>e.class),{sections:p}=(0,r.d4)(e=>e.section);(0,t.useEffect)(()=>{s&&e((0,o.jO)(s))},[e,s]),(0,t.useEffect)(()=>{e((0,c.jt)())},[e]);let[x,N]=(0,t.useState)({fatherName:"",motherName:"",email:"",aadhaarCard:"",occupation:"",phone:"",address:{street:"",city:"",state:"",country:""}}),[g,j]=(0,t.useState)({firstName:"",lastName:"",phone:"",email:"",gender:"",dob:"",parentCode:"",aadhaarCard:"",admissionDate:"",bloodGroup:"",allergies:"",medicalConditions:"",achievements:"",currentSection:""}),v=e=>{let{name:a,value:s}=e.target;a in x.address?N(e=>({...e,address:{...e.address,[a]:s}})):N(e=>({...e,[a]:s}))},f=e=>{let{name:a,value:s}=e.target;j(e=>({...e,[a]:s}))},y=async a=>{a.preventDefault();try{let{parentCode:a,fatherName:s}=(await e((0,d.JY)(x))).payload;console.log(a),b(a),alert("Parent data saved. You can now fill in student data.")}catch(e){console.error("Parent Submission Error:",e)}},w=async s=>{if(s.preventDefault(),!u)return void alert("Please submit parent data first.");try{let s={...g,parentCode:u};await e((0,n.s5)(s)),alert("Student data submitted successfully."),a.push("/Dashboard/Student/StudentList")}catch(e){console.error("Student Submission Error:",e)}};return(0,l.jsxs)("div",{className:"w-full p-4 space-y-6",children:[(0,l.jsxs)("form",{onSubmit:y,className:"bg-white shadow-md rounded-lg p-6 space-y-4",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Parent Information"}),["fatherName","motherName","email","aadhaarCard","occupation","phone"].map(e=>(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{className:"block text-gray-700 capitalize mb-1",children:e.replace(/([A-Z])/g," $1")}),(0,l.jsx)("input",{type:"text",name:e,value:x[e],onChange:v,className:"w-full border p-2 rounded-md",required:!0})]},e)),["street","city","state","country"].map(e=>(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsxs)("label",{className:"block text-gray-700 capitalize mb-1",children:["Address ",e]}),(0,l.jsx)("input",{type:"text",name:e,value:x.address[e],onChange:v,className:"w-full border p-2 rounded-md",required:!0})]},e)),(0,l.jsx)("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Submit Parent Info"})]}),(0,l.jsxs)("form",{onSubmit:w,className:"bg-white shadow-md rounded-lg p-6 space-y-4",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Student Information"}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{className:"block text-gray-700 mb-1",children:"Parent code"}),(0,l.jsx)("input",{name:"parentCode",value:u,className:"w-full border p-2 rounded-md",onChange:e=>{b(e.target.value)},required:!0})]}),["firstName","lastName","phone","email","gender","aadhaarCard","bloodGroup"].map(e=>(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{className:"block text-gray-700 capitalize mb-1",children:e.replace(/([A-Z])/g," $1")}),(0,l.jsx)("input",{type:"text",name:e,value:g[e],onChange:f,className:"w-full border p-2 rounded-md",required:!0})]},e)),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{className:"block text-gray-700 mb-1",children:"Date of Birth"}),(0,l.jsx)("input",{type:"date",name:"dob",value:g.dob,onChange:f,className:"w-full border p-2 rounded-md",required:!0})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{className:"block text-gray-700 mb-1",children:"Admission Date"}),(0,l.jsx)("input",{type:"date",name:"admissionDate",value:g.admissionDate,onChange:f,className:"w-full border p-2 rounded-md",required:!0})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{className:"block text-gray-700 mb-1",children:"Allergies"}),(0,l.jsx)("textarea",{name:"allergies",value:g.allergies,onChange:f,className:"w-full border p-2 rounded-md"})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{className:"block text-gray-700 mb-1",children:"Medical Conditions"}),(0,l.jsx)("textarea",{name:"medicalConditions",value:g.medicalConditions,onChange:f,className:"w-full border p-2 rounded-md"})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{className:"block text-gray-700 mb-1",children:"Achievements"}),(0,l.jsx)("input",{name:"achievements",value:g.achievements,onChange:f,className:"w-full border p-2 rounded-md"})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{className:"block text-gray-700 mb-1",children:"Class"}),(0,l.jsxs)("select",{className:"w-full border p-2 rounded-md",value:s,onChange:e=>{m(e.target.value),j(e=>({...e,currentSection:""}))},required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select Class"}),null==h?void 0:h.map(e=>(0,l.jsx)("option",{value:e._id,children:e.className},e._id))]})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{className:"block text-gray-700 mb-1",children:"Section"}),(0,l.jsxs)("select",{className:"w-full border p-2 rounded-md",value:g.currentSection,onChange:e=>j(a=>({...a,currentSection:e.target.value})),required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select Section"}),null==p?void 0:p.map(e=>(0,l.jsx)("option",{value:e._id,children:e.sectionName},e._id))]})]}),(0,l.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Submit Student Info"})]})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[636,6593,8792],()=>a(3464)),_N_E=e.O()}]);