(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2867],{1713:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var r=a(4232);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),l=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},d=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},i=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:o="",children:u,iconNode:h,...m}=e;return(0,r.createElement)("svg",{ref:t,...c,width:s,height:s,stroke:a,strokeWidth:l?24*Number(n)/Number(s):n,className:d("lucide",o),...!u&&!i(m)&&{"aria-hidden":"true"},...m},[...h.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let a=(0,r.forwardRef)((a,n)=>{let{className:i,...c}=a;return(0,r.createElement)(o,{ref:n,iconNode:t,className:d("lucide-".concat(s(l(e))),"lucide-".concat(e),i),...c})});return a.displayName=l(e),a}},6526:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var r=a(7876);a(4232);var s=a(1713);let n=(0,s.A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),l=(0,s.A)("wallet-minimal",[["path",{d:"M17 14h.01",key:"7oqj8z"}],["path",{d:"M7 7h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14",key:"u1rqew"}]]),d=e=>{let{payments:t,onPay:a}=e;return(0,r.jsxs)("div",{className:"overflow-x-auto bg-white rounded-xl shadow p-4",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Monthly Fee Details"}),(0,r.jsxs)("table",{className:"min-w-full text-sm text-left",children:[(0,r.jsx)("thead",{className:"bg-gray-100 text-gray-600",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-2",children:"Child Name"}),(0,r.jsx)("th",{className:"px-4 py-2",children:"Class"}),(0,r.jsx)("th",{className:"px-4 py-2",children:"Month"}),(0,r.jsx)("th",{className:"px-4 py-2",children:"Tuition Fee"}),(0,r.jsx)("th",{className:"px-4 py-2",children:"Bus Fee"}),(0,r.jsx)("th",{className:"px-4 py-2",children:"Total"}),(0,r.jsx)("th",{className:"px-4 py-2",children:"Status"}),(0,r.jsx)("th",{className:"px-4 py-2 text-center",children:"Action"})]})}),(0,r.jsx)("tbody",{children:null==t?void 0:t.map(e=>{var t,s,d,i,c,o,u,h,m;let p="paid"===e.status,x="".concat((null==(t=e.studentId)?void 0:t.firstName)||""," ").concat((null==(s=e.studentId)?void 0:s.lastName)||""),y=(null==(c=e.studentId)||null==(i=c.currentSection)||null==(d=i.classId)?void 0:d.className)||"N/A",N=(null==(u=e.studentId)||null==(o=u.currentSection)?void 0:o.sectionName)||"";return(0,r.jsxs)("tr",{className:"border-b hover:bg-gray-50 transition",children:[(0,r.jsx)("td",{className:"px-4 py-2 font-medium text-gray-800",children:x}),(0,r.jsxs)("td",{className:"px-4 py-2",children:[y," ",N]}),(0,r.jsx)("td",{className:"px-4 py-2",children:e.month}),(0,r.jsxs)("td",{className:"px-4 py-2",children:["₹",(null==(h=e.breakdown)?void 0:h.tuition)||0]}),(0,r.jsxs)("td",{className:"px-4 py-2",children:["₹",(null==(m=e.breakdown)?void 0:m.bus)||0]}),(0,r.jsxs)("td",{className:"px-4 py-2 font-semibold",children:["₹",e.amount]}),(0,r.jsx)("td",{className:"px-4 py-2 capitalize",children:p?"Paid":"Unpaid"}),(0,r.jsx)("td",{className:"px-4 py-2 text-center",children:p?(0,r.jsx)(n,{className:"text-green-600 mx-auto",size:20}):(0,r.jsxs)("button",{onClick:()=>a(e),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-md flex items-center justify-center gap-1 text-sm mx-auto",children:[(0,r.jsx)(l,{size:16}),"Pay"]})})]},e._id)})})]})]})}},7024:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/Dashboard/Student/StudentInfo/FetchFee",function(){return a(8176)}])},8176:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(7876),s=a(4232),n=a(1777),l=a(409),d=a(6526),i=a(441);let c=()=>{let e=(0,n.wA)(),{studentDetails:t}=(0,n.d4)(e=>e.student),{fees:a,loading:c,error:o}=(0,n.d4)(e=>e.student);(0,s.useEffect)(()=>{(null==t?void 0:t._id)&&e((0,l.DH)(t._id))},[t,e]);let u=async a=>{try{let{data:r}=await i.A.post("/fees/createOrder",{amount:a.amount,studentId:a.studentId._id,month:a.month,year:a.year}),{order:s}=r,n={key:"rzp_test_tpQcPeL4OMk4bG",amount:s.amount,currency:s.currency,name:"SUN RISE INTERNATIONAL PUBLIC SCHOOL",description:"Monthly Tuition Fee",order_id:s.id,handler:async function(r){await i.A.post("/fees/verifyPayment",{razorpay_payment_id:r.razorpay_payment_id,razorpay_order_id:r.razorpay_order_id,razorpay_signature:r.razorpay_signature,studentId:a.studentId._id,month:a.month,year:a.year}),e((0,l.DH)(t._id)),alert("Payment Successful!")},prefill:{name:"".concat(a.studentId.firstName," ").concat(a.studentId.lastName),email:a.studentId.email||"",contact:a.studentId.phone||""},theme:{color:"#3399cc"}};new window.Razorpay(n).open()}catch(e){console.error("Payment failed",e),alert("Something went wrong. Please try again.")}};return(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h1",{className:"text-xl font-bold mb-4",children:"Your Monthly Fee Details"}),c&&(0,r.jsx)("p",{children:"Loading..."}),o&&(0,r.jsxs)("p",{className:"text-red-600",children:["Error: ",o]}),!c&&(0,r.jsx)(d.A,{payments:a,onPay:u})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,6593,8792],()=>t(7024)),_N_E=e.O()}]);