(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6396],{1212:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/Dashboard/Section/AddSubject",function(){return s(6209)}])},6209:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(7876),l=s(4232),c=s(1777),r=s(3859),d=s(2842),n=s(4293),i=s(5510),o=s(9099);let u=()=>{let e=(0,c.wA)(),t=(0,o.useRouter)(),{subjects:s}=(0,c.d4)(e=>e.subject),{teachers:u}=(0,c.d4)(e=>e.teacher),{section:h}=(0,c.d4)(e=>e.section),[b,m]=(0,l.useState)([{subject:"",teacher:""}]);(0,l.useEffect)(()=>{if(!h||!h._id){let t=localStorage.getItem("selectedSection");t&&e((0,i.c4)(JSON.parse(t)))}e((0,r.Nj)()),e((0,d.x0)())},[e,h]);let j=(e,t,s)=>{let a=[...b];a[e][t]=s,m(a)},x=e=>{m(b.filter((t,s)=>s!==e))};return(0,a.jsxs)("div",{className:"max-w-3xl mx-auto p-6 bg-white rounded shadow-md",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Assign Subjects and Teachers"}),b.map((e,t)=>(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-center mb-4 border-b pb-4",children:[(0,a.jsxs)("select",{className:"w-full sm:w-1/2 p-2 border rounded",value:e.subject,onChange:e=>j(t,"subject",e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select Subject"}),null==s?void 0:s.map(e=>(0,a.jsx)("option",{value:e._id,children:e.subjectName},e._id))]}),(0,a.jsxs)("select",{className:"w-full sm:w-1/2 p-2 border rounded",value:e.teacher,onChange:e=>j(t,"teacher",e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select Teacher"}),null==u?void 0:u.map(e=>(0,a.jsxs)("option",{value:e._id,children:[e.firstName," ",e.lastName]},e._id))]}),(0,a.jsx)("button",{onClick:()=>x(t),className:"text-red-500 hover:text-red-700 mt-2 sm:mt-0",children:"âœ•"})]},t)),(0,a.jsx)("button",{onClick:()=>{m([...b,{subject:"",teacher:""}])},className:"text-blue-600 hover:text-blue-800 font-medium mb-4",children:"+ Add More"}),(0,a.jsx)("button",{onClick:()=>{let s=b.filter(e=>e.subject&&e.teacher);return 0===s.length?alert("Please add at least one subject-teacher pair."):h&&h._id?void(s.forEach(t=>{e((0,n.Ke)({sectionId:h._id,subjectId:t.subject,teacherId:t.teacher}))}),alert("Subjects assignment initiated!"),t.push("/Dashboard/Section/SectionList")):(0,a.jsx)("p",{children:"Loading section data..."})},className:"w-full bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700",children:"Submit"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,6593,8792],()=>t(1212)),_N_E=e.O()}]);