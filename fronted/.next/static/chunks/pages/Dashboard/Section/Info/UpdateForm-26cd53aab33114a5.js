(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9679],{1274:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/Dashboard/Section/Info/UpdateForm",function(){return a(9726)}])},9726:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o});var l=a(7876),c=a(4232),t=a(1777),r=a(2842),n=a(3859),i=a(4293),d=a(9099);function o(){var e,s,a;let o=(0,t.wA)(),u=(0,d.useRouter)(),{section:m}=(0,t.d4)(e=>e.section),{teachers:h}=(0,t.d4)(e=>e.teacher),{subjects:x}=(0,t.d4)(e=>e.subject),[p,b]=(0,c.useState)(""),[j,N]=(0,c.useState)([]);(0,c.useEffect)(()=>{o((0,r.x0)()),o((0,n.Nj)())},[o]),(0,c.useEffect)(()=>{m&&(b(m.classTeacher||""),N((m.subjects||[]).map(e=>({...e}))))},[m]);let v=(e,s,a)=>{N(j.map((l,c)=>c===e?{...l,[s]:a}:l))},f=e=>{let s=[...j];s.splice(e,1),N(s)},g=async()=>{try{await o((0,i.vg)({id:m._id,classTeacher:p,subjects:j})).unwrap(),alert("Section updated successfully."),u.push("/Dashboard/Section/SectionList")}catch(e){console.error(e),alert("Error updating section.")}};return m?(0,l.jsxs)("div",{className:"max-w-3xl mx-auto p-4",children:[(0,l.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Update Section"}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block font-medium mb-1",children:"Section Name"}),(0,l.jsx)("input",{type:"text",value:null==m?void 0:m.sectionName,readOnly:!0,className:"w-full px-3 py-2 border rounded bg-gray-100"})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block font-medium mb-1",children:"Class"}),(0,l.jsx)("input",{type:"text",value:(null==(e=m.classId)?void 0:e.className)||"N/A",readOnly:!0,className:"w-full px-3 py-2 border rounded bg-gray-100"})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("label",{className:"block font-medium mb-1",children:"Class Teacher"}),(0,l.jsxs)("select",{value:p,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border rounded",children:[(0,l.jsx)("option",{value:"",children:"Select Teacher"}),h.map(e=>(0,l.jsx)("option",{value:e._id,children:e.firstName},e._id))]}),(0,l.jsxs)("span",{className:"text-sm text-gray-500 mt-1 block",children:["Current:"," ",(0,l.jsx)("span",{className:"text-gray-800 font-medium",children:null==(s=m.classTeacher)?void 0:s.firstName}),(0,l.jsx)("strong",{children:(0,l.jsx)("span",{className:"text-gray-800 font-medium",children:null==(a=m.classTeacher)?void 0:a.lastName})||"N/A"})]})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Subjectâ€“Teacher Pairs"}),j.map((e,s)=>(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-2 items-center",children:[(0,l.jsxs)("select",{value:e.subject,onChange:e=>v(s,"subject",e.target.value),className:"px-2 py-1 border rounded",children:[(0,l.jsx)("option",{value:"",children:"Select Subject"}),x.map(e=>(0,l.jsx)("option",{value:e._id,children:e.subjectName},e._id))]}),(0,l.jsxs)("select",{value:e.teacher,onChange:e=>v(s,"teacher",e.target.value),className:"px-2 py-1 border rounded",children:[(0,l.jsx)("option",{value:"",children:"Select Teacher"}),h.map(e=>(0,l.jsx)("option",{value:e._id,children:e.firstName},e._id))]}),(0,l.jsx)("span",{onClick:()=>f(s),className:"text-red-600 cursor-pointer text-sm hover:underline",children:"Remove"})]},s))]}),(0,l.jsx)("div",{className:"text-center",children:(0,l.jsx)("span",{onClick:g,className:"bg-blue-600 text-white px-6 py-2 rounded cursor-pointer hover:bg-blue-700",children:"Update Section"})})]}):(0,l.jsx)("div",{children:"Loading section..."})}}},e=>{var s=s=>e(e.s=s);e.O(0,[636,6593,8792],()=>s(1274)),_N_E=e.O()}]);