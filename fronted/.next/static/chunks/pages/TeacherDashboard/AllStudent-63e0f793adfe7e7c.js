(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1943],{1713:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var a=s(4232);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),n=e=>{let t=r(e);return t.charAt(0).toUpperCase()+t.slice(1)},c=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},i=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:l=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:o="",children:u,iconNode:h,...x}=e;return(0,a.createElement)("svg",{ref:t,...d,width:l,height:l,stroke:s,strokeWidth:n?24*Number(r)/Number(l):r,className:c("lucide",o),...!u&&!i(x)&&{"aria-hidden":"true"},...x},[...h.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let s=(0,a.forwardRef)((s,r)=>{let{className:i,...d}=s;return(0,a.createElement)(o,{ref:r,iconNode:t,className:c("lucide-".concat(l(n(e))),"lucide-".concat(e),i),...d})});return s.displayName=n(e),s}},2089:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1713).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2302:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/TeacherDashboard/AllStudent",function(){return s(5694)}])},2341:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1713).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3022:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1713).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},5694:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var a=s(7876),l=s(4232),r=s(1777),n=s(409),c=s(9312),i=s(4293),d=s(2341),o=s(3022),u=s(2089);let h=e=>{let{students:t,teacherId:s,onView:l,onEdit:r,onDelete:n}=e;return(0,a.jsx)("div",{className:"overflow-x-auto shadow rounded-lg bg-white",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[(0,a.jsx)("thead",{className:"bg-gray-100 text-gray-700 text-left",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3",children:"REG.NO"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Name"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Email"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"fatherName"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"parentCode"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Class"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"currentSection"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Status"}),(0,a.jsx)("th",{className:"px-4 py-3 text-center",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:null==t?void 0:t.map(e=>{var t,c,i,h,x,p;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition",children:[(0,a.jsx)("td",{className:"px-4 py-3",children:e.registrationNumber}),(0,a.jsxs)("td",{className:"px-4 py-3 font-medium text-gray-800",children:[e.firstName," ",e.lastName]}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.email}),(0,a.jsx)("td",{className:"px-4 py-3",children:(null==(t=e.parent)?void 0:t.fatherName)||"N/A"}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.parentCode}),(0,a.jsx)("td",{className:"px-4 py-3",children:(null==(i=e.currentSection)||null==(c=i.classId)?void 0:c.className)||"N/A"}),(0,a.jsx)("td",{className:"px-4 py-3",children:(null==(h=e.currentSection)?void 0:h.sectionName)||"N/A"}),(0,a.jsx)("td",{className:"px-4 py-3 capitalize",children:e.status}),(0,a.jsxs)("td",{className:"px-4 py-3 flex justify-center gap-2 text-gray-600",children:[(0,a.jsx)("button",{onClick:()=>l(e),className:"hover:text-blue-600 cursor-pointer",title:"View",children:(0,a.jsx)(d.A,{size:18})}),(null==(p=e.currentSection)||null==(x=p.classTeacher)?void 0:x._id)===s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>r(e),className:"hover:text-yellow-500 cursor-pointer",title:"Edit",children:(0,a.jsx)(o.A,{size:18})}),(0,a.jsx)("button",{onClick:()=>n(e),className:"hover:text-red-500 cursor-pointer",title:"Delete",children:(0,a.jsx)(u.A,{size:18})})]})]})]},e._id)})})]})})};var x=s(8666),p=s(6984);let m=()=>{{let e=localStorage.getItem("token");if(!e)return null;try{return(0,p.s)(e)._id}catch(e){return console.error("Invalid token",e),null}}};var N=s(9099);let y=()=>{let e=(0,r.wA)(),t=(0,N.useRouter)(),{students:s}=(0,r.d4)(e=>e.student),{classes:d}=(0,r.d4)(e=>e.class),{sections:o}=(0,r.d4)(e=>e.section),[u,p]=(0,l.useState)(""),[y,j]=(0,l.useState)(""),[v,f]=(0,l.useState)(""),[g,w]=(0,l.useState)(null);console.log("teacher id",g);let b=s.filter(e=>{var t,s,a;let l="".concat(e.firstName," ").concat(e.lastName).toLowerCase(),r=!v||l.includes(v.toLowerCase()),n=!u||(null==(s=e.currentSection)||null==(t=s.classId)?void 0:t._id)===u,c=!y||(null==(a=e.currentSection)?void 0:a._id)===y;return r&&n&&c}),k=v||u||y,_=u?o.filter(e=>e.classId._id===u):[];return(0,l.useEffect)(()=>{(async()=>{let e=await m();console.log("Fetched teacher ID:",e),w(e)})()},[]),(0,l.useEffect)(()=>{e((0,n.Y)()),e((0,c.jt)())},[e]),(0,l.useEffect)(()=>{u&&e((0,i.jO)(u))},[e,u]),(0,a.jsxs)("div",{className:"p-4 max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"All Students"}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsxs)("select",{value:u,onChange:e=>{p(e.target.value),j("")},className:"border p-2 rounded-md",children:[(0,a.jsx)("option",{value:"",children:"Select Class"}),d.map(e=>(0,a.jsx)("option",{value:e._id,children:e.className},e._id))]}),(0,a.jsxs)("select",{value:y,onChange:e=>j(e.target.value),className:"border p-2 rounded-md",children:[(0,a.jsx)("option",{value:"",children:"Select Section"}),_.map(e=>(0,a.jsx)("option",{value:e._id,children:e.sectionName},e._id))]}),(0,a.jsx)("input",{type:"text",placeholder:"Search by name...",value:v,onChange:e=>f(e.target.value),className:"border p-2 w-64 rounded-md"})]})]}),(0,a.jsx)(h,{students:k?b:s,teacherId:g,onView:s=>{e((0,x._d)(s)),t.push("/Dashboard/Student/StudentInfo/StudentDetail"),console.log("View student:",s)},onEdit:s=>{e((0,x._d)(s)),t.push("/Dashboard/Student/UpdateStudent"),console.log("Edit student:",s)},onDelete:e=>{console.log("Delete student:",e)}})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,6593,8792],()=>t(2302)),_N_E=e.O()}]);